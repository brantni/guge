{"remainingRequest":"D:\\project\\gitHub\\guge\\node_modules\\babel-loader\\lib\\index.js??ref--0-1!D:\\project\\gitHub\\guge\\src\\js\\common\\pubSubEvent.js","dependencies":[{"path":"D:\\project\\gitHub\\guge\\src\\js\\common\\pubSubEvent.js","mtime":1505183983988},{"path":"D:\\project\\gitHub\\guge\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1510929699000},{"path":"D:\\project\\gitHub\\guge\\node_modules\\babel-loader\\lib\\index.js","mtime":1503096278000}],"contextDependencies":[],"result":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n/* \n* @Author: Marte\n* @Date:   2017-05-12 14:35:14\n* @Last Modified by:   Marte\n* @Last Modified time: 2017-09-12 10:39:43\n*/\n// var PubSubEvent = (function(){\nvar PubSubEvent = {};\n//events={key:[fun1,fun2]}\nvar events = {};\n\nPubSubEvent.publish = function (key, data) {\n    if (events[key]) {\n        var funArray = events[key];\n        funArray.forEach(function (fun) {\n            try {\n                fun.apply(null, data);\n            } catch (e) {\n                console.log(e);\n            }\n        });\n    }\n};\n\nPubSubEvent.subscribe = function (key, fun) {\n    var uid = \"\";\n    if (typeof key != \"string\" || typeof fun != \"function\") {\n        return false;\n    }\n    if (!events[key]) {\n        events[key] = [];\n    }\n\n    events[key].push(fun);\n\n    var token = {};\n    token.key = key;\n    token.fun = fun;\n\n    return token;\n};\n/*\n 可能有以下几种情况：\n 1.传入key+fun：PubSubEvent.unsubscribe(\"key\",fun)--取消特定函数\n 2.传入key：PubSubEvent.unsubscribe(\"key\")--取消key下的所有函数\n 3.传入token：PubSubEvent.unsubscribe(token)--取消token对应的特定函数\n 3.传入函数（可以是匿名）：PubSubEvent.unsubscribe(function)--取消特定函数\n */\nPubSubEvent.unsubscribe = function () {\n    var argArray = Array.prototype.slice.call(arguments);\n    if (argArray.length == 0) {\n        return false;\n    }\n    if (argArray.length == 1) {\n        var arg = argArray[0];\n        if (typeof arg == \"function\") {\n            var e, functionArray;\n            for (e in events) {\n                functionArray = events[e];\n                functionArray.forEach(function (fun, i) {\n                    if (arg == fun) {\n                        functionArray.splice(i, 1);\n                        return;\n                    }\n                });\n            }\n            return true;\n        }\n        if (typeof arg == \"string\") {\n            if (!events[arg]) {\n                return false;\n            }\n            delete events[arg];\n            return true;\n        }\n        if (Object.prototype.toString.call(arg) == \"[object Object]\") {\n            var token = arg;\n            return deleteFun(token.key, token.fun);\n        }\n    }\n    if (argArray.length == 2) {\n        // var [key,fun] = [argArray[0],argArray[1]];\n        var key = argArray[0],\n            fun = argArray[1];\n        if (typeof key != \"string\") {\n            return false;\n        }\n        if (typeof fun != \"function\") {\n            return false;\n        }\n        return deleteFun(key, fun);\n    }\n    return false;\n};\n\nfunction deleteFun(key, fun) {\n    var funArray = events[key],\n        hitEventIndex;\n\n    funArray.forEach(function (o, i) {\n        if (o == fun) {\n            hitEventIndex = i;\n            return;\n        }\n    });\n    if (hitEventIndex == undefined) {\n        return false;\n    }\n\n    funArray.splice(hitEventIndex, 1);\n    return true;\n}\n\n// window.PubSubEvent = PubSubEvent;\n// })();\n\nexports.PubSubEvent = PubSubEvent;",{"version":3,"sources":["src\\js\\common\\pubSubEvent.js"],"names":["PubSubEvent","events","publish","key","data","funArray","forEach","fun","apply","e","console","log","subscribe","uid","push","token","unsubscribe","argArray","Array","prototype","slice","call","arguments","length","arg","functionArray","i","splice","Object","toString","deleteFun","hitEventIndex","o","undefined"],"mappings":"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","file":"pubSubEvent.js","sourceRoot":"D:/project/gitHub/guge","sourcesContent":["/* \n* @Author: Marte\n* @Date:   2017-05-12 14:35:14\n* @Last Modified by:   Marte\n* @Last Modified time: 2017-09-12 10:39:43\n*/\n// var PubSubEvent = (function(){\nvar PubSubEvent = {};\n    //events={key:[fun1,fun2]}\n    var events = {};\n\n    PubSubEvent.publish = function (key,data){\n        if(events[key]){\n            var funArray = events[key];\n            funArray.forEach(function(fun){\n                try{                  \n                    fun.apply(null,data);\n                }catch(e){\n                    console.log(e);\n                }\n            });\n        }\n    }\n\n    PubSubEvent.subscribe = function (key,fun){\n        var uid = \"\";\n        if(typeof key != \"string\"||typeof fun != \"function\"){\n            return false;\n        }\n        if(!events[key]){\n            events[key] = [];\n        }\n\n        events[key].push(fun);\n        \n        var token = {};\n        token.key = key;\n        token.fun = fun;\n\n        return token;\n    }\n    /*\n     可能有以下几种情况：\n     1.传入key+fun：PubSubEvent.unsubscribe(\"key\",fun)--取消特定函数\n     2.传入key：PubSubEvent.unsubscribe(\"key\")--取消key下的所有函数\n     3.传入token：PubSubEvent.unsubscribe(token)--取消token对应的特定函数\n     3.传入函数（可以是匿名）：PubSubEvent.unsubscribe(function)--取消特定函数\n     */\n    PubSubEvent.unsubscribe = function (){\n        var argArray = Array.prototype.slice.call(arguments);\n        if(argArray.length == 0){\n            return false;\n        }\n        if(argArray.length == 1){\n            var arg = argArray[0];\n            if(typeof arg == \"function\"){\n                var e,functionArray;\n                for(e in events){\n                    functionArray = events[e];\n                    functionArray.forEach(function(fun,i){\n                        if(arg == fun){\n                            functionArray.splice(i,1);\n                            return;\n                        }\n                    });\n                }\n                return true;\n            }\n            if(typeof arg == \"string\"){\n                if(!events[arg]){\n                    return false;\n                }\n                delete events[arg];\n                return true;\n            }\n            if(Object.prototype.toString.call(arg) == \"[object Object]\"){\n                var token = arg;\n                return deleteFun(token.key,token.fun);\n            }\n        }\n        if(argArray.length == 2){\n            // var [key,fun] = [argArray[0],argArray[1]];\n            var key = argArray[0],\n                fun = argArray[1];\n            if(typeof key != \"string\"){\n                return false;\n            }\n            if(typeof fun != \"function\"){\n                return false;\n            }\n            return deleteFun(key,fun);\n        }\n        return false;\n    }\n\n    function deleteFun(key,fun){\n        var funArray = events[key],\n            hitEventIndex;\n\n        funArray.forEach(function(o,i){\n            if(o == fun){\n                hitEventIndex = i;\n                return;\n            }\n        });\n        if(hitEventIndex == undefined){\n            return false;\n        }\n\n        funArray.splice(hitEventIndex,1);\n        return true;\n    }\n\n    // window.PubSubEvent = PubSubEvent;\n// })();\n\nexport {PubSubEvent} ;"]}]}