{"remainingRequest":"D:\\project\\gitHub\\guge\\node_modules\\babel-loader\\lib\\index.js??ref--0-1!D:\\project\\gitHub\\guge\\src\\js\\common\\slider.js","dependencies":[{"path":"D:\\project\\gitHub\\guge\\src\\js\\common\\slider.js","mtime":1521099694043},{"path":"D:\\project\\gitHub\\guge\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1510929699000},{"path":"D:\\project\\gitHub\\guge\\node_modules\\babel-loader\\lib\\index.js","mtime":1503096278000}],"contextDependencies":[],"result":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.Slider = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _pubSubEvent = require(\"./pubSubEvent\");\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Slider = function () {\n    function Slider(domContext, options) {\n        _classCallCheck(this, Slider);\n\n        if (!domContext) return;\n        options = options || {};\n        this.domContext = domContext; //上下文\n        this.itemClassName = options.itemClassName || \"sliderItem\";\n        this.itemNodeList = this.domContext.querySelectorAll(\".\" + this.itemClassName); //所有item数组\n        this.animationTime = options.animationTime || 600; //动画时间\n        this.currentIndex = options.currentIndex || 0; //当前显示的item索引\n        this.lifeCount = this.itemNodeList.length; //item的数量\n        this.interval = options.interval || 5000; //滑动间隔（自动模式）\n        this.auto = options.auto || true; //是否自动滑动\n        this.direction = options.direction || \"left\"; //滑动方向\n        this.timer = null;\n        this.timerObj = {};\n        if (this.auto) {\n            this.start();\n        }\n        bindEvent.call(this);\n    }\n\n    _createClass(Slider, [{\n        key: \"slideLeft\",\n        value: function slideLeft(currentItem, nextItem) {\n            currentItem = currentItem || this.itemNodeList[this.currentIndex];\n            if (this.lifeCount - 1 == this.currentIndex) {\n                this.currentIndex = 0;\n            } else {\n                ++this.currentIndex;\n            }\n            _pubSubEvent.PubSubEvent.publish(\"sliderIndex\", [this.currentIndex]);\n            currentItem.style.left = \"-100%\";\n            nextItem.style.left = 0;\n        }\n    }, {\n        key: \"slideRight\",\n        value: function slideRight(currentItem, nextItem) {\n            currentItem = currentItem || this.itemNodeList[this.currentIndex];\n            if (0 == this.currentIndex) {\n                this.currentIndex = this.lifeCount - 1;\n            } else {\n                --this.currentIndex;\n            }\n            _pubSubEvent.PubSubEvent.publish(\"sliderIndex\", [this.currentIndex]);\n            currentItem.style.left = \"100%\";\n            nextItem.style.left = 0;\n        }\n    }, {\n        key: \"gotoItem\",\n        value: function gotoItem(dir, nextItem) {\n            var that = this;\n            dir = dir || that.direction;\n            // let nextItem = getNextItem.call(that,dir,index);\n            if (dir == \"left\") {\n                that.slideLeft(null, nextItem);\n            } else {\n                that.slideRight(null, nextItem);\n            }\n        }\n    }, {\n        key: \"start\",\n        value: function start() {\n            var that = this;\n            that.timer = setInterval(function () {\n                if (that.direction == \"left\") {\n                    var nextItem = that.getNextItem();\n                    var timeOutLeft = setTimeout(function () {\n                        if (!that.timer || !nextItem) return;\n                        that.slideLeft(null, nextItem);\n                        that.timerObj[\"timeOutLeft\"] = null;\n                    }, that.animationTime);\n                    that.timerObj[\"timeOutLeft\"] = timeOutLeft;\n                } else {\n                    var _nextItem = that.getNextItem();\n                    var timeOutRight = setTimeout(function () {\n                        if (!that.timer || !_nextItem) return;\n                        that.slideRight(null, _nextItem);\n                        that.timerObj[\"timeOutRight\"] = null;\n                    }, that.animationTime);\n                    that.timerObj[\"timeOutRight\"] = timeOutRight;\n                }\n            }, that.interval);\n        }\n    }, {\n        key: \"stop\",\n        value: function stop() {\n            clearInterval(this.timer);\n            this.timer = null;\n            clearTimer.call(this);\n        }\n    }, {\n        key: \"getNextItem\",\n        value: function getNextItem(dir, nextIndex) {\n            var nextItem = null;\n            if (!dir) {\n                if (this.direction == \"left\") {\n                    if (this.lifeCount - 1 == this.currentIndex) {\n                        nextItem = this.itemNodeList[0];\n                    } else {\n                        nextItem = this.itemNodeList[this.currentIndex + 1];\n                    }\n                    nextItem.style.zIndex = -1;\n                    nextItem.style.left = \"100%\";\n                } else {\n                    if (0 == this.currentIndex) {\n                        nextItem = this.itemNodeList[this.lifeCount - 1];\n                    } else {\n                        nextItem = this.itemNodeList[this.currentIndex - 1];\n                    }\n                    nextItem.style.zIndex = -1;\n                    nextItem.style.left = \"-100%\";\n                }\n            } else {\n                nextItem = this.itemNodeList[nextIndex];\n                nextItem.style.zIndex = -1;\n                if (dir == \"right\") {\n                    nextItem.style.left = \"-100%\";\n                } else {\n                    nextItem.style.left = \"100%\";\n                }\n            }\n            setTimeout(function () {\n                nextItem.style.zIndex = \"\";\n            }, this.animationTime);\n            return nextItem;\n        }\n    }]);\n\n    return Slider;\n}();\n//私有方法\n\n\nfunction bindEvent() {\n    var that = this;\n    this.domContext.addEventListener(\"mouseenter\", function () {\n        that.stop();\n    }, false);\n    this.domContext.addEventListener(\"mouseleave\", function () {\n        if (!that.timer) {\n            that.start();\n        }\n    }, false);\n}\nfunction clearTimer() {\n    var timerObj = this.timerObj,\n        keyArray = Object.keys(timerObj),\n        key = void 0;\n    var _iteratorNormalCompletion = true;\n    var _didIteratorError = false;\n    var _iteratorError = undefined;\n\n    try {\n        for (var _iterator = keyArray[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n            key = _step.value;\n\n            if (timerObj[key]) {\n                clearTimeout(timerObj[key]);\n                timerObj[key] = null;\n            }\n        }\n    } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n    } finally {\n        try {\n            if (!_iteratorNormalCompletion && _iterator.return) {\n                _iterator.return();\n            }\n        } finally {\n            if (_didIteratorError) {\n                throw _iteratorError;\n            }\n        }\n    }\n}\nexports.Slider = Slider;",{"version":3,"sources":["src\\js\\common\\slider.js"],"names":["Slider","domContext","options","itemClassName","itemNodeList","querySelectorAll","animationTime","currentIndex","lifeCount","length","interval","auto","direction","timer","timerObj","start","bindEvent","call","currentItem","nextItem","publish","style","left","dir","that","slideLeft","slideRight","setInterval","getNextItem","timeOutLeft","setTimeout","timeOutRight","clearInterval","clearTimer","nextIndex","zIndex","addEventListener","stop","keyArray","Object","keys","key","clearTimeout"],"mappings":"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","file":"slider.js","sourceRoot":"D:/project/gitHub/guge","sourcesContent":["import {PubSubEvent} from './pubSubEvent';\nclass Slider {\n    constructor(domContext,options){\n        if(!domContext) return;\n        options = options || {};\n        this.domContext = domContext;//上下文\n        this.itemClassName = options.itemClassName || \"sliderItem\";\n        this.itemNodeList = this.domContext.querySelectorAll(\".\"+this.itemClassName);//所有item数组\n        this.animationTime = options.animationTime || 600;//动画时间\n        this.currentIndex = options.currentIndex || 0;//当前显示的item索引\n        this.lifeCount = this.itemNodeList.length;//item的数量\n        this.interval = options.interval || 5000;//滑动间隔（自动模式）\n        this.auto = options.auto || true;//是否自动滑动\n        this.direction = options.direction || \"left\";//滑动方向\n        this.timer = null;\n        this.timerObj = {};\n        if(this.auto){\n            this.start();\n        }\n        bindEvent.call(this);\n    }\n    slideLeft(currentItem,nextItem){\n        currentItem = currentItem || this.itemNodeList[this.currentIndex];\n        if(this.lifeCount - 1 == this.currentIndex){\n            this.currentIndex = 0;\n        }else{\n            ++ this.currentIndex;\n        }\n        PubSubEvent.publish(\"sliderIndex\",[this.currentIndex]);\n        currentItem.style.left = \"-100%\";\n        nextItem.style.left = 0;\n    }\n    slideRight(currentItem,nextItem){\n        currentItem = currentItem || this.itemNodeList[this.currentIndex];\n        if(0 == this.currentIndex){\n            this.currentIndex = this.lifeCount - 1;\n        }else{\n            -- this.currentIndex;\n        }\n        PubSubEvent.publish(\"sliderIndex\",[this.currentIndex]);\n        currentItem.style.left = \"100%\";\n        nextItem.style.left = 0;\n    }\n    gotoItem(dir,nextItem){\n        let that = this;\n        dir = dir || that.direction;\n        // let nextItem = getNextItem.call(that,dir,index);\n        if(dir == \"left\"){\n            that.slideLeft(null,nextItem);\n        }else{\n            that.slideRight(null,nextItem);\n        }\n    }\n    start(){\n        let that = this;\n        that.timer = setInterval(() => {\n            if(that.direction == \"left\"){\n                let nextItem = that.getNextItem();\n                var timeOutLeft = setTimeout(() => {\n                    if(!that.timer||!nextItem) return;\n                    that.slideLeft(null,nextItem);\n                    that.timerObj[\"timeOutLeft\"] = null;\n                }, that.animationTime);\n                that.timerObj[\"timeOutLeft\"] = timeOutLeft;\n            }else{\n                let nextItem = that.getNextItem();\n                var timeOutRight=setTimeout(() => {\n                    if(!that.timer||!nextItem) return;\n                    that.slideRight(null,nextItem);\n                    that.timerObj[\"timeOutRight\"] = null;\n                }, that.animationTime);\n                that.timerObj[\"timeOutRight\"] = timeOutRight;\n            }\n        }, that.interval);\n    }\n    stop(){\n        clearInterval(this.timer);\n        this.timer = null;\n        clearTimer.call(this);\n    }\n    getNextItem(dir,nextIndex){\n        let nextItem = null;\n        if(!dir){\n            if(this.direction == \"left\"){\n                if(this.lifeCount - 1 == this.currentIndex){\n                    nextItem = this.itemNodeList[0];\n                }else{\n                    nextItem = this.itemNodeList[this.currentIndex+1];\n                }\n                nextItem.style.zIndex = -1;\n                nextItem.style.left = \"100%\";\n            }else{\n                if(0 == this.currentIndex){\n                    nextItem = this.itemNodeList[this.lifeCount - 1];\n                }else{\n                    nextItem = this.itemNodeList[this.currentIndex-1];\n                }\n                nextItem.style.zIndex = -1;\n                nextItem.style.left = \"-100%\";\n            }\n        }else{\n            nextItem = this.itemNodeList[nextIndex];\n            nextItem.style.zIndex = -1;\n            if(dir == \"right\"){\n                nextItem.style.left = \"-100%\";\n            }else{\n                nextItem.style.left = \"100%\";\n            }\n        }\n        setTimeout(() => {\n            nextItem.style.zIndex = \"\";\n        }, this.animationTime);\n        return nextItem;\n    }\n}\n//私有方法\nfunction bindEvent(){\n    let that = this;\n    this.domContext.addEventListener(\"mouseenter\", () => {\n        that.stop();\n    }, false);\n    this.domContext.addEventListener(\"mouseleave\", () => {\n        if(!that.timer){\n            that.start();\n        }\n    }, false);\n}\nfunction clearTimer(){\n    let timerObj = this.timerObj,keyArray = Object.keys(timerObj),key;\n    for(key of keyArray){\n        if(timerObj[key]){\n            clearTimeout(timerObj[key]);\n            timerObj[key] = null;\n        }\n    }\n}\nexport {Slider} ;"]}]}